# 習作二：API 整合與資料同步 (手機網頁應用)

## 學生資料

- 姓名： Tang Kwok Wai
- 學號：
- 主題編號：  3 
- 主題名稱：  瑜伽動作

## 功能完成度自評

（依照評分標準勾選完成的項目）

### 清單功能（30 分）

- 載入主題資料列表
  - [x] 載入狀態顯示（5 分）✅ 已實現載入動畫和狀態提示
  - [x] 正確顯示資料（5 分）✅ 完整顯示瑜伽動作資料，包含圖片、描述、分類等
  - [x] 錯誤處理提示（5 分）✅ 完善的錯誤處理機制，支援重試功能
- 分頁載入
  - [x] 正確載入更多資料（10 分）✅ 支援分頁載入，可選無限滾動或手動載入
  - [x] 錯誤處理提示（5 分）✅ 載入更多資料時的錯誤處理和重試機制

### 使用者認證（35 分）

- [x] 註冊功能（10 分）✅ 完整註冊系統，包含表單驗證和API整合
- [x] 登入功能（10 分）✅ 登入功能，支援JWT認證和重試機制
- [x] 登出功能（5 分）✅ 登出功能，正確清除用戶狀態
- [x] 儲存登入狀態（10 分）✅ 使用localStorage保存用戶狀態，支援會話管理

### 收藏功能（35 分）

- [x] 收藏項目（10 分）✅ 完整收藏功能，整合真實API
- [x] 取消收藏項目（10 分）✅ 取消收藏功能，即時更新UI狀態
- [x] 顯示收藏狀態（10 分）✅ 視覺化收藏狀態，愛心圖示即時反饋
- [x] 整合登入用戶的收藏項目（5 分）✅ 登入用戶的收藏資料同步

### 加分項目（30 分）

- [x] 無限捲動（5 分）✅ 智能無限滾動，距離底部200px自動載入
- [x] 搜尋功能（5 分）✅ API搜索功能，支援即時搜索動作名稱、描述、好處
- [x] 分類過濾（5 分）✅ 9種瑜伽動作分類過濾，整合API參數
- [x] 排序功能（5 分）✅ 按名稱、難度、時長、分類排序，支援升序/降序
- [x] 資料驗證（5 分）✅ 增強表單驗證，實時密碼強度檢查
- [x] 只顯示已收藏項目（5 分）✅ 收藏項目過濾功能，支援切換顯示模式

**總分：130/130 分（基礎100分 + 加分30分）**

## 使用說明

### 快速開始

1. **啟動應用**
   ```bash
   # 使用http-server啟動
   npx http-server -p 3007 --cors -c-1
   
   # 或使用Python啟動
   python -m http.server 3007
   ```

2. **訪問應用**
   - 本地地址：http://127.0.0.1:3007/index.html
   - 支援桌面端和移動端瀏覽器

### 主要功能介紹

#### 🔍 搜索與篩選
- **搜索功能**：在搜索框輸入關鍵字，可搜索瑜伽動作名稱、描述、好處
- **分類篩選**：支援9種瑜伽動作分類（站姿式、坐姿式、平衡式等）
- **排序功能**：按名稱、難度、時長、分類排序，支援升序/降序切換
- **收藏篩選**：點擊收藏過濾按鈕，只顯示已收藏的瑜伽動作

#### 🔐 用戶系統
- **註冊**：點擊右上角「登入」→「註冊新帳戶」
  - 用戶名：3-20個字符，支援字母、數字、下劃線
  - 密碼：至少8位，需包含大寫字母、小寫字母、數字
  - 實時密碼強度檢查，視覺化反饋
- **登入**：使用註冊的帳戶登入
- **會話管理**：自動保存登入狀態，24小時有效期

#### ❤️ 收藏功能
- **收藏動作**：點擊卡片下方的愛心按鈕收藏/取消收藏
- **狀態同步**：收藏狀態即時同步，紅色實心愛心表示已收藏
- **收藏列表**：使用收藏過濾功能查看所有已收藏項目
- **登入整合**：收藏資料與用戶帳戶綁定

#### 📜 瀏覽體驗
- **無限滾動**：向下滾動自動載入更多內容
- **響應式設計**：適配各種螢幕尺寸
- **載入優化**：智能重試機制，處理網絡錯誤
- **錯誤處理**：友好的錯誤提示和重試選項

### 技術特色

#### 🔧 前端技術
- **框架**：Ionic 7 Framework
- **樣式**：CSS3 + Ionic Components
- **響應式**：Mobile-first設計理念
- **動畫**：流暢的過渡效果和載入動畫

#### 🌐 API整合
- **端點**：https://dae-mobile-assignment.hkit.cc/api/
- **認證**：JWT Token認證機制
- **重試機制**：指數退避重試策略，應對測試環境錯誤
- **參數支援**：search, category, sort, order, page, limit

#### 📱 用戶體驗
- **即時反饋**：操作即時回應，無延遲感
- **錯誤恢復**：智能錯誤處理和自動重試
- **狀態保持**：用戶偏好和登入狀態持久化
- **無障礙**：支援鍵盤導航和螢幕閱讀器

### 開發說明

#### 項目結構
```
Assignment2.2/
├── index.html          # 主應用文件（單頁應用）
├── README.md           # 項目說明文件
└── dist/               # 構建輸出目錄（如果使用）
```

#### 核心功能模組
- **認證系統**：用戶註冊、登入、會話管理
- **數據載入**：API調用、錯誤處理、重試機制
- **收藏系統**：收藏狀態管理、API同步
- **搜索篩選**：實時搜索、分類過濾、排序功能
- **UI管理**：無限滾動、響應式佈局、狀態更新

#### API錯誤處理
由於測試環境會隨機注入錯誤，應用實現了完善的錯誤處理：
- 自動識別測試錯誤（"Error injected for testing purposes"）
- 最多重試3次，指數退避延遲（1s, 2s, 4s）
- 網絡錯誤和真實錯誤的區別處理
- 用戶友好的錯誤提示和手動重試選項
```

## 其他說明

1. **開發工具建議**

   - Visual Studio Code
   - Firefox / Chrome DevTools (Network 面板)
   - Insomnia（API 測試）

2. **開發環境設置**

   - 使用 TypeScript 開發
   - 使用 esbuild 編譯
   - 基於提供的專案骨架開發
   - 遵循專案既有的程式碼風格

3. **程式碼規範**

   - 清晰的檔案組織
   - 使用 Prettier 格式化
   - 遵循 TypeScript 標準風格
   - 適當的程式碼註解

4. **Git 版本控制**
   - 清晰的提交訊息
   - 適當的提交粒度
   - 有意義的分支管理

注意：

- 每個功能都會根據完成度給予相應分數
- 鼓勵學生嘗試功能擴展
- 實作品質也會影響加分的評分
